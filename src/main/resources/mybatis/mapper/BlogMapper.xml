<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mybatis.luban.mapper.BlogMapper">

    <resultMap id="BaseBlogMap" type="mybatis.luban.model.BlogMap">
        <id property="id" column="id"/>
        <result property="title" column="title"/>
        <!-- 1:1 嵌套子查询 fetchType="eager"关闭懒加载-->
        <association property="author" column="user_id" select="mybatis.luban.mapper.UserMapper.selectUserById"/>
        <!-- 1:n 嵌套子查询-->
        <association property="comments" column="comment_id" select="mybatis.luban.mapper.CommentMapper.selectCommentsByBlogId"/>
    </resultMap>

    <select id="selectBlogById" resultMap="BaseBlogMap">
        select * from blog where id = #{id}
    </select>
</mapper>